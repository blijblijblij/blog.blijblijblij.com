<!doctype html><html xmlns=http://www.w3.org/1999/xhtml lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Slack update from pdi | blog.blijblijblij.com</title><meta property="og:title" content="Slack update from pdi - blog.blijblijblij.com"><meta property="og:description" content="Data-transform your slack channels In my humble opinion Slack is a fantastic tool for keeping development teams aligned and informed. It has (irc supported) chat, voice calls, proper code snippet sharing but it really shines in its ability to integrate all that is important to a team.
For example we integrate:
 updates on github, Pull requests, comments, &mldr; updates on tickets, new, open, closed tickets updates from ci, builds, tests, the occasional #FAIL updates from deploys instantiated from ci onto the mesos cluster updates on failing services and network components from nagios bash scripts synchronising in the background or via cron  One thing was missing Updates from pesky long running etl-jobs, while being away from the vpn-ed carte status page."><meta property="og:url" content="https://blog.blijblijblij.com/posts/slack-update-from-pdi/"><meta property="og:site_name" content="blog.blijblijblij.com"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.blijblijblij.com/images/cover.jpg"><meta property="article:published_time" content="2016-11-19T10:00:04+01:00"><meta property="article:modified_time" content="2016-11-19T10:00:04+01:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content="@blijblijblij"><meta name=twitter:creator content="@blijblijblij"><link href=https://blog.blijblijblij.com/index.xml rel=alternate type=application/rss+xml title=blog.blijblijblij.com><link rel=stylesheet href=/css/style.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://blog.blijblijblij.com/posts/slack-update-from-pdi/><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"></head><body><section class=section><div class=container><nav id=nav-main class=nav><div id=nav-name class=nav-left><a id=nav-anchor class=nav-item href=https://blog.blijblijblij.com/><h1 id=nav-heading class="title is-4">blog.blijblijblij.com</h1></a></div><div class=nav-right><nav id=nav-items class="nav-item level is-mobile"><a class=level-item aria-label=github href=https://github.com/blijblijblij target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></i></span></a><a class=level-item aria-label=twitter href=https://twitter.com/blijblijblij target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></i></span></a><a class=level-item aria-label=instagram href=https://instagram.com/blijblijblij target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37z"/><line x1="17.5" y1="6.5" x2="17.5" y2="6.5"/></svg></i></span></a><a class=level-item aria-label=email href=mailto:rogier@blijblijblij.com target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></i></span></a><a class=level-item aria-label=linkedin href=https://linkedin.com/in/blijblijblij target=_blank rel=noopener><span class=icon><i><svg viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path stroke-width="1.8" d="m5.839218 4.101561c0 1.211972-.974141 2.194011-2.176459 2.194011S1.4863 5.313533 1.4863 4.101561c0-1.211094.974141-2.194011 2.176459-2.194011s2.176459.982917 2.176459 2.194011zm.017552 3.94922h-4.388022v14.04167H5.85677V8.050781zm7.005038.0H8.501869v14.04167h4.360816v-7.370999c0-4.098413 5.291077-4.433657 5.291077.0v7.370999h4.377491v-8.89101c0-6.915523-7.829986-6.66365-9.669445-3.259423V8.050781z"/></svg></i></span></a></nav></div></nav><nav class=nav></nav></div><script src=/js/navicon-shift.js></script></section><section class=section><div class=container><div class="subtitle tags is-6 is-pulled-right"><a class="subtitle is-6" href=/tags/pentaho>#pentaho</a>
| <a class="subtitle is-6" href=/tags/pdi>#pdi</a>
| <a class="subtitle is-6" href=/tags/slack>#slack</a></div><h2 class="subtitle is-6">November 19, 2016</h2><h1 class=title>Slack update from pdi</h1><div class=content><h1 id=data-transform-your-slack-channels>Data-transform your slack channels</h1><p>In my humble opinion <a href=https://slack.com/>Slack</a> is a fantastic tool for keeping development teams aligned and informed. It has (irc supported) chat, <a href=https://get.slack.help/hc/en-us/articles/216771908-Start-a-voice-call-in-Slack>voice calls</a>, proper code snippet sharing but it really shines in its ability to <a href=https://api.slack.com/custom-integrations>integrate all that is important to a team</a>.</p><p>For example we integrate:</p><ul><li>updates on github, Pull requests, comments, &mldr;</li><li>updates on tickets, new, open, closed tickets</li><li>updates from ci, builds, tests, the occasional <code>#FAIL</code></li><li>updates from deploys instantiated from ci onto the mesos cluster</li><li>updates on failing services and network components from nagios</li><li>bash scripts synchronising in the background or via cron</li></ul><h2 id=one-thing-was-missing>One thing was missing</h2><p>Updates from pesky long running etl-jobs, while being away from the vpn-ed carte status page. And a convenient way of updating fellow <code>are-we-there-yet-are-we-there-yet-are-we-there-yet-are-we-there-yet-</code> colleagues ;-).</p><h2 id=enter-the-slack-incoming-webhook>Enter the slack incoming webhook</h2><p>Slacks <a href=https://api.slack.com/incoming-webhooks>incoming-webhook</a> is simple, easy to understand and can be extended to support a lot of feedback:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl -X POST <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>--data-urlencode <span style=color:#e6db74>&#39;payload={&#34;text&#34;:&#34;This is a line of text.\nAnd this is another one.&#34;}&#39;</span> <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXXXXXX
</code></pre></div><p>Pdi can do this nicely, and posting it to a slack endpoint seems a no brainer. So for something to be usefull it has to:</p><ul><li>update on starting a job</li><li>update on sub jobs / transformations</li><li>escalate on <code>#FAIL</code>-ed data transformations</li></ul><h2 id=do-it>Do it</h2><p>A reporting transformation that delivers the very same json, but with some additions:</p><p><img src=/images/2016-11-19_tr_report.png alt="report to slack" title="report to slack"></p><p>Script the json with javascript:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>payload</span><span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;{&#39;</span> <span style=color:#f92672>+</span>
	<span style=color:#e6db74>&#39;&#34;channel&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>channel</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;&#34;username&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>username</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
	<span style=color:#e6db74>&#39;&#34;text&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>env</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;&#34;attachments&#34;: [&#39;</span> <span style=color:#f92672>+</span>
        <span style=color:#e6db74>&#39;{&#39;</span> <span style=color:#f92672>+</span>
            <span style=color:#e6db74>&#39;&#34;title&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>title</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
            <span style=color:#e6db74>&#39;&#34;text&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
			<span style=color:#e6db74>&#39;&#34;fallback&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>text</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;,&#39;</span> <span style=color:#f92672>+</span>
            <span style=color:#e6db74>&#39;&#34;color&#34;: &#34;&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>color</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39;&#34;&#39;</span> <span style=color:#f92672>+</span>
        <span style=color:#e6db74>&#39;}&#39;</span> <span style=color:#f92672>+</span>
    <span style=color:#e6db74>&#39;]&#39;</span> <span style=color:#f92672>+</span>
<span style=color:#e6db74>&#39;};&#39;</span>;
</code></pre></div><p>Incorperate the slack reporting into a bigger picture:</p><p><img src=/images/2016-11-19_jb_main.png alt="main job" title="main job"></p><p>Et voila, some slack updates:</p><p><img src=/images/2016-11-19_slack_updated.png alt="on slack" title="on slack"></p><h2 id=thin-foil-hat>Thin foil hat</h2><p>This thing is updating from internal sources onto semi-public services, save to say to not stick any comprising data in those shiny new status updates&mldr;</p><h2 id=source-kjb--ktr>Source kjb / ktr</h2><p><a href=https://github.com/blijblijblij/pdi-slack-reporting/archive/version-Release-1.zip>link</a></p><div class=related><h3>Similar articles:</h3><ul><li><a href=/posts/pentaho-and-mesos/>Running pentaho on mesos - part 1</a></li><li><a href=/posts/pentahanl-spring-meetup/>Pentaho NL spring meetup</a></li><li><a href=/posts/jekyll-to-hugo/>Jekyll boooh, hugo yeah!</a></li><li><a href=/posts/2016-04-26-first-meetup-update/>Update: First pentaho nl meetup!</a></li><li><a href=/posts/2016-01-30-first-meetup/>First pentaho nl meetup!</a></li></ul></div></div></div></section><script src=/js/copycode.js></script><section class=section><div class="container has-text-centered"><p>Copyright <a href=https://github.com/blijblijblij>Rogier Wessel</a> 2020</p></div></section></body></html>